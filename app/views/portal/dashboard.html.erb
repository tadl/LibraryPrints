<main class="dashboard container mx-auto py-8">
  <p class="mb-4">
    <%= link_to "← Home", root_path, class: "view-link" %>
  </p>

  <h1 class="text-2xl font-semibold mb-6">Your Jobs</h1>

  <% if @jobs.any? %>
    <div class="job-grid">
      <% @jobs.each do |job| %>
        <div class="job-card">
          <div class="job-card__header">
            <span class="job-card__date">
              <%= job.created_at.strftime("%b %-d, %Y") %>
            </span>
            <span class="badge badge--<%= job.status.code.dasherize %>">
              <%= job.status.name %>
            </span>
          </div>
          <div class="job-card__body">
            <p><strong>Type:</strong> <%= job.type.demodulize.delete_suffix("Job") %></p>
            <p>
              <strong>Location:</strong>
              <% if (loc = PickupLocation.find_by(code: job.pickup_location)) %>
                <%= loc.name %>
              <% else %>
                <%= job.pickup_location.humanize %>
              <% end %>
            </p>
            <% if job.respond_to?(:assigned_printer) && job.assigned_printer %>
              <p><strong>Printer:</strong> <%= job.assigned_printer.printer_model %></p>
            <% end %>
          </div>
          <div class="job-card__footer">
            <%= link_to "Details →", job_path(job), class: "btn btn-sm" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="no-jobs text-center py-16">
      <p class="text-lg mb-4">You have no jobs yet.</p>
      <%= link_to "Submit one now", submit_job_path, class: "btn btn-primary" %>
    </div>
  <% end %>
</main>
